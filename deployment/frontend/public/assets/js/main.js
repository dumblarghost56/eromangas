const d=document,$nav=d.querySelector(".nav"),$btnMobile=d.getElementById("mobile-menu"),$templateAlert=d.getElementById("template-alert").content,$gallery=d.getElementById("gallery");$btnMobile.onclick=e=>$nav.classList.toggle("flex");const sendAlert=e=>{const{title:t="Warning!!!",text:l="Lorem",cb:o=!1}=e,r=$templateAlert.cloneNode(!0);r.querySelector(".title").textContent=t,r.querySelector(".text").textContent=l,r.querySelector(".btn-close").onclick=e=>{d.body.removeChild(e.target.closest(".alert"))},r.querySelector(".cb").onclick=e=>{d.body.removeChild(e.target.closest(".alert")),o&&o()},d.body.appendChild(r)};if(result){const e=d.querySelector(".form");e&&e.reset();sendAlert({1:{title:"Exito!!!",text:"Se ha creado el post correctamente"},2:{title:"Exito!!!",text:"Se ha actualizado el post correctamente"},3:{title:"Exito!!!",text:"Se ha borrado el post correctamente"}}[result])}if($gallery){const e=d.getElementById("template-post").content,t=d.createDocumentFragment();fetch("api/post/limit/20").then(e=>e.ok?e.json():Promise.reject(e)).then(l=>{l.forEach(l=>{const o=e.cloneNode(!0);o.querySelector("figcaption").textContent=l.title,o.querySelector("a").href="/reader/"+l.id,o.querySelector(".post__img .webp").srcset="/assets/thumbnails/"+l.thumbnail.webp,o.querySelector(".post__img .avif").srcset="/assets/thumbnails/"+l.thumbnail.avif,o.querySelector(".post__img img").src="/assets/thumbnails/"+l.thumbnail.all,t.appendChild(o)}),$gallery.appendChild(t)}).catch(e=>console.log(e))}